import{bw as Ze,bx as j,bR as Xe,r as o,a as Y,b as me,F as ue,u as Je,E as Qe,c as e,f as De,e as Ee,R as Pe,h as g,k as u,l as f,m as v,a_ as ye,n as Ve,q as re,C as X,L as J,H as n,d as _e,c$ as ce,aR as Ye,bo as es,B as oe,bJ as ss,aW as as,aX as ts,d0 as ls,g as is,N as ns,y as ve,z as ke,T as Me,A as we,U as rs}from"./index-e391d606.js";import{a as cs,f as os,g as de,h as ds,i as ms,j as Te,u as us,k as hs,l as Se,m as Be}from"./ContractTerm-bca6f0b4.js";const xs=Ze().shape({contactName:j().required("Contact Name is required").max(100,"Max. length is 100").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Contact Name").trim(),contactNumber:j().required("Contact number is required").matches(/^(\d{3}-\d{3}-\d{4}|\d{10})$/,"Enter a valid 10-digit mobile number"),paymentTermId:Xe().positive().integer(),workWeek:j().required("Work Week is required").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z, ' ]+$/,"Invalid characters in Work Week"),superAdminFee:j().required("Super Admin Fee is required").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values").min(0,"Super Admin Fee must be greater than or equal to 0"),nonBillableOrientation:j().required("Non Billable Orientation is required.").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Non Billable Orientation"),holidayMultiplier:j().required("Holiday Multiplier is required.").typeError("Holiday Multiplier is required").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values"),includedHolidays:j().required("Included Holidays is required").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z, ' ]+$/,"Invalid characters in Included Holidays"),holidayBillingRules:j().required(" Holiday Billing Rules is required.").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Included Holiday Billing Rules"),overtimeMultiplier:j().typeError("Overtime Multiplier is required").required("Overtime Multiplier is required").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values"),overtimeThreshold:j().required("Overtime Threshold is required").typeError("Overtime Threshold is required").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values").min(0,"Overtime Threshold must be greater than or equal to 0"),onCallRate:j().typeError("On-CallRate is required").required("On-CallRate is required.").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values").min(0,"On-CallRate must be greater than or equal to 0"),doubletimeMultiplier:j().required("Double Time Multiplier is required.").typeError("Double Time Multiplier is required").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values").min(0,"Double Time Multiplier must be greater than or equal to 0"),callBackMultiplier:j().typeError("Call Back Multiplier is required").required("Call Back Multiplier is required.").matches(/^\d+(\.\d+)?$/,"Enter only number and decimal values").min(0,"Call Back Multiplier must be greater than or equal to 0"),timeRoundingGuidelines:j().required(" Time Rounding Guidelines is required").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Included Time Rounding Guidelines"),specialBillingDetails:j().required(" Special Billing Details is required").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Included Special Billing Details"),gauranteedHrs:j().required("Guaranteed Hours is required").typeError("Guaranteed Hours is required").matches(/^[0-9]+$/,"Guaranteed Hours must contain only positive numbers").min(0,"Guaranteed Hours must be greater than or equal to 0"),timekeepingProcess:j().required(" Time Keeping Process are required.").max(255,"Max. length is 255").min(2,"Min. length is 2").matches(/^[a-zA-Z' ]+$/,"Invalid characters in Included Time Keeping Process"),missedPunchPayrollProcess:j().max(255,"Max. length is 255").min(2,"Min. length is 2"),costCenters:j().max(255,"Max. length is 255").min(2,"Min. length is 2"),kronosTimeCodes:j().max(255,"Max. length is 255").min(2,"Min. length is 2")}),gs=({switchToNextTab:d,onContractIdChange:A,setActiveTab:p})=>{var _,t,c,y,r,b,E,H,P,l,R,he,xe,ge,pe,Ne,je;const[$,q]=o.useState([]),[O,m]=o.useState(!1),[h,L]=o.useState(null),[x,S]=o.useState(""),[F,G]=o.useState(""),[B,z]=o.useState(""),[W,U]=o.useState(),{Id:T,contractId:C}=Y(),Z=me(),{setActiveComponent:k}=o.useContext(ue),{register:i,handleSubmit:D,formState:{errors:a},reset:Q,setValue:N}=Je({resolver:Qe(xs)});o.useEffect(()=>{(async()=>{var I,K;try{m(!0);const M=await cs(Number(T));m(!1),q(M)}catch(M){console.error(M),m(!1),n("error",((K=(I=M==null?void 0:M.response)==null?void 0:I.data)==null?void 0:K.message)||"Something went wrong")}})()},[]),o.useEffect(()=>{C||(async()=>{var I,K;try{m(!0);const M=await os(Number(T));m(!1),U(M.nextId)}catch(M){console.error(M),m(!1),n("error",((K=(I=M==null?void 0:M.response)==null?void 0:I.data)==null?void 0:K.message)||"Something went wrong")}})()},[C,T]);const V=async()=>{m(!0);try{if(C!==void 0){const s=await de(Number(T),Number(C));N("contactName",_e(s.ContactName)),N("contactNumber",ye(s.ContactNumber)),N("workWeek",s.WorkWeek),N("superAdminFee",s.SuperAdminFee),N("nonBillableOrientation",s.NonBillableOrientation),N("holidayMultiplier",s.HolidayMultiplier),N("includedHolidays",s.IncludedHolidays),N("holidayBillingRules",s.HolidayBillingRules),N("overtimeMultiplier",s.OvertimeMultiplier),N("overtimeThreshold",s.OvertimeThreshold),N("onCallRate",s.OnCallRate),N("doubletimeMultiplier",s.DoubletimeMultiplier),N("callBackMultiplier",s.CallBackMultiplier),N("timeRoundingGuidelines",s.TimeRoundingGuidelines),N("specialBillingDetails",s.SpecialBillingDetails),N("gauranteedHrs",s.GauranteedHrs),N("timekeepingProcess",s.TimekeepingProcess),s.PaymentTerm&&s.PaymentTerm.Id&&L({value:s.PaymentTerm.Id,label:s.PaymentTerm.Term}),S(s.MissedPunchPayrollProcess),G(s.CostCenters),z(s.KronosTimeCodes)}m(!1)}catch(s){console.error(s),m(!1),n("error",s.response.message||"Something went wrong")}};o.useEffect(()=>{V()},[C]);const ee=()=>{const s=ce(x);return s?s.length>255?(n("error","Missed Punch/Payroll Process should be less than 256 characters"),!1):!0:(n("error","Missed Punch/Payroll Process is required"),!1)},se=()=>{const s=ce(F);return s?s.length>255?(n("error","Cost Centers should be less than 256 characters"),!1):!0:(n("error","Cost Centers is required"),!1)},ae=()=>{const s=ce(B);return s?s.length>255?(n("error","Kronos Specific Time Codes should be less than 256 characters"),!1):!0:(n("error","Kronos Specific Time Codes is required"),!1)},te=async s=>{var M,fe,Ce,be;if(!h)return n("error","Please select a payment term");if(!ee()||!se()||!ae())return;const I=s.contactNumber.replace(/\D/g,""),K={...s,contactNumber:I,paymentTermId:h==null?void 0:h.value,missedPunchPayrollProcess:x,costCenters:F,kronosTimeCodes:B};if(C)try{const{contactName:w,workWeek:ie,superAdminFee:qe,nonBillableOrientation:Re,holidayMultiplier:Ie,includedHolidays:Oe,holidayBillingRules:Fe,overtimeMultiplier:He,overtimeThreshold:Ae,onCallRate:$e,doubletimeMultiplier:Le,callBackMultiplier:Ge,timeRoundingGuidelines:ze,specialBillingDetails:We,gauranteedHrs:Ue,timekeepingProcess:Ke}=s;m(!0);const ne=await ms(Number(T),Number(C),w,I,h==null?void 0:h.value,ie,qe,Re,Ie,Oe,Fe,He,Ae,$e,Le,Ge,ze,We,Ue,Ke,x,F,B);(ne==null?void 0:ne.status)===200&&(d(),p("2")),m(!1),Q(),n("success","Contract term Edited successfully"),L(null),S(""),G(""),z("")}catch(w){console.error(w),m(!1),n("error",((be=(Ce=w==null?void 0:w.response)==null?void 0:Ce.data)==null?void 0:be.message)||"Something went wrong")}else try{m(!0);const w=await ds(Number(T),K),ie=w.id;A(ie),w!=null&&w.id&&(d(),p("2")),m(!1),Q(),n("success","Contract term created successfully"),L(null),S(""),G(""),z("")}catch(w){console.error(w),m(!1),n("error",((fe=(M=w==null?void 0:w.response)==null?void 0:M.data)==null?void 0:fe.message)||"Something went wrong")}},le=()=>{k("Contract Terms"),Z(`/facility/${T}`)};return e.jsxs("div",{children:[O&&e.jsx(De,{}),e.jsxs(Ee,{onSubmit:D(te),children:[e.jsxs(Pe,{className:"mt-3",children:[e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Accounts Payable(AP) Contact Name"," ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Contact Name",invalid:!!a.contactName,...i("contactName")}),e.jsx(v,{children:(_=a.contactName)==null?void 0:_.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Accounts Payable(AP) Contact Number"," ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Contact Number",invalid:!!a.contactNumber,...i("contactNumber",{onChange:s=>{const I=ye(s.target.value);N("contactNumber",I)}})}),e.jsx(v,{children:(t=a.contactNumber)==null?void 0:t.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Contract ID ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Contract ID",disabled:!0,value:C?`FCON-${C}`:`FCON-${W}`})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Payment Terms",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(Ve,{id:"paymentterm",name:"payemtterm",options:$.map(s=>({label:s.Term,value:s.Id})),noOptionsMessage:()=>"No options available",placeholder:"Select  Payment Terms",value:h?{value:h==null?void 0:h.value,label:h==null?void 0:h.label}:null,onChange:s=>{L(s)}})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Work Week ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Work Week",invalid:!!a.workWeek,...i("workWeek")}),e.jsx(v,{children:(c=a.workWeek)==null?void 0:c.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Super Admin Fee ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Super Admin Fee ",invalid:!!a.superAdminFee,...i("superAdminFee")}),e.jsx(v,{children:(y=a.superAdminFee)==null?void 0:y.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Non-Billable Orientation ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Non Billable Orientation",invalid:!!a.nonBillableOrientation,...i("nonBillableOrientation")}),e.jsx(v,{children:(r=a.nonBillableOrientation)==null?void 0:r.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Holiday Multiplier ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:" Holiday Multiplier ",invalid:!!a.holidayMultiplier,...i("holidayMultiplier")}),e.jsx(v,{children:(b=a.holidayMultiplier)==null?void 0:b.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["List of Included Holidays ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"List of Included Holidays ",invalid:!!a.includedHolidays,...i("includedHolidays")}),e.jsx(v,{children:(E=a.includedHolidays)==null?void 0:E.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Holiday Billing Rules ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:" Holiday Billing Rules ",invalid:!!a.holidayBillingRules,...i("holidayBillingRules")}),e.jsx(v,{children:(H=a.holidayBillingRules)==null?void 0:H.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Overtime Multiplier ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Overtime Multiplier ",invalid:!!a.overtimeMultiplier,...i("overtimeMultiplier")}),e.jsx(v,{children:(P=a.overtimeMultiplier)==null?void 0:P.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Overtime Threshold ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Overtime Threshold  ",invalid:!!a.overtimeThreshold,...i("overtimeThreshold")}),e.jsx(v,{children:(l=a.overtimeThreshold)==null?void 0:l.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["On-Call Rate ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"$ 0.00",invalid:!!a.onCallRate,...i("onCallRate")}),e.jsx(v,{children:(R=a.onCallRate)==null?void 0:R.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Double Time Multiplier"," ",e.jsx("span",{className:"california-text",children:"(California Only)"})]}),e.jsx(f,{placeholder:"$ 0.00",invalid:!!a.doubletimeMultiplier,...i("doubletimeMultiplier")}),e.jsx(v,{children:(he=a.doubletimeMultiplier)==null?void 0:he.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Call Back Multiplier ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Call Back Multiplier ",invalid:!!a.callBackMultiplier,...i("callBackMultiplier")}),e.jsx(v,{children:(xe=a.callBackMultiplier)==null?void 0:xe.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Time Rounding Guidelines ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Time Rounding Guidelines ",invalid:!!a.timeRoundingGuidelines,...i("timeRoundingGuidelines")}),e.jsx(v,{children:(ge=a.timeRoundingGuidelines)==null?void 0:ge.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Special Billing Details ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Special Billing Details",invalid:!!a.specialBillingDetails,...i("specialBillingDetails")}),e.jsx(v,{children:(pe=a.specialBillingDetails)==null?void 0:pe.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Guaranteed Hours ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Guaranteed Hours ",invalid:!!a.gauranteedHrs,...i("gauranteedHrs")}),e.jsx(v,{children:(Ne=a.gauranteedHrs)==null?void 0:Ne.message})]}),e.jsxs(g,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[e.jsxs(u,{className:"",children:["Timekeeping Process ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(f,{placeholder:"Timekeeping Process ",invalid:!!a.timekeepingProcess,...i("timekeepingProcess")}),e.jsx(v,{children:(je=a.timekeepingProcess)==null?void 0:je.message})]}),e.jsxs(g,{xxl:"12",xl:"12",lg:"12",className:"col-group",children:[e.jsxs(u,{className:"",children:["Missed Punch/ Payroll Process ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(re,{content:x,handleChange:S})]}),e.jsxs(g,{xxl:"12",xl:"12",lg:"12",className:"col-group",children:[e.jsxs(u,{className:"",children:["Cost Centers Listed by Unit ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(re,{content:F,handleChange:G})]}),e.jsxs(g,{xxl:"12",xl:"12",lg:"12",className:"col-group",children:[e.jsxs(u,{className:"",children:["Kronos Specific Time Codes ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(re,{content:B,handleChange:z})]})]}),e.jsxs("div",{className:"btn-wrapper",children:[e.jsx(X,{className:"primary-btn",children:"Save & Next"}),e.jsx(J,{onClick:le,to:"",children:e.jsx(X,{className:"secondary-btn",children:"Cancel"})})]})]})]})},ps=({contractIdprop:d,switchToContractInfoTab:A})=>{const[p,$]=o.useState(),[q,O]=o.useState(),[m,h]=o.useState(""),[L,x]=o.useState(!1),[S,F]=o.useState([]),{setActiveComponent:G}=o.useContext(ue),[B,z]=o.useState(null),[W,U]=o.useState(null),[T,C]=o.useState(!1),Z=me(),{Id:k,contractId:i}=Y(),D=async()=>{x(!0);try{if(i!==void 0){const t=await de(Number(k),Number(i));F(t.ContractDocuments)}else if(d!==void 0){const t=await de(Number(k),Number(d));F(t.ContractDocuments)}x(!1)}catch(t){console.error(t),x(!1),n("error",t.response.message||"Something went wrong")}};o.useEffect(()=>{D()},[i]);const a=t=>{var r;const c=(r=t.target.files)==null?void 0:r[0];O(b=>(b==null?void 0:b.name)===(c==null?void 0:c.name)?(n("error","Contract Document already exists"),b):c),S.some(b=>b.FileName===(c==null?void 0:c.name))?n("error","Contract Document already exists"):c&&($(c),O(c),U(null))},Q=async t=>{var c,y;try{x(!0),i!==void 0?(await Se(Number(k),Number(i),t),await D(),n("success","Contract term deleted successfully")):d!==void 0&&(await Se(Number(k),Number(d),t),await D(),n("success","Contract term deleted successfully ")),x(!1)}catch(r){console.error("Error deleting contact:",r),x(!1),n("error",((y=(c=r==null?void 0:r.response)==null?void 0:c.data)==null?void 0:y.message)||"Something went wrong")}},N=async t=>{var c,y;try{x(!0),i!==void 0?Be(Number(k),Number(i),t).then(r=>{const b=r.headers["content-disposition"];let E="download";if(b){const R=b.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);R&&R[1]&&(E=R[1].replace(/['"]/g,""))}const H=new Blob([r.data],{type:r.headers["content-type"]}),P=URL.createObjectURL(H),l=document.createElement("a");l.href=P,l.download=E,l.click(),URL.revokeObjectURL(P)}):d!==void 0&&Be(Number(k),Number(d),t).then(r=>{const b=r.headers["content-disposition"];let E="download";if(b){const R=b.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);R&&R[1]&&(E=R[1].replace(/['"]/g,""))}const H=new Blob([r.data],{type:r.headers["content-type"]}),P=URL.createObjectURL(H),l=document.createElement("a");l.href=P,l.download=E,l.click(),URL.revokeObjectURL(P)}),x(!1)}catch(r){console.error(r),x(!1),n("error",((y=(c=r==null?void 0:r.response)==null?void 0:c.data)==null?void 0:y.message)||"Something went wrong")}},V=2,ee={document1:["doc","docx","pdf"]},se=t=>{var y,r;return(r=(y=t==null?void 0:t.name)==null?void 0:y.split(".").pop())==null?void 0:r.toLowerCase()},ae=async()=>{var t,c,y,r,b,E,H,P;if(p){const l=se(q);if(!l||!ee.document1.includes(l))return n("error","Supported formats are only .doc, .docx, .pdf")}if(p&&(p==null?void 0:p.size)/1048576>V)return n("error",`File size exceeds the maximum limit of ${V} MB`);if(m.length===0){n("error","Notes is requied");return}if(T)try{x(!0),i!==void 0?await Te(Number(k),Number(i),Number(B),{notes:m,contractDocuments:p}):d!==void 0&&await Te(Number(k),Number(d),Number(B),{notes:m,contractDocuments:p}),x(!1),$(void 0),O(void 0),await D(),h(""),C(!1),U(null)}catch(l){console.error(l),x(!1),n("error",((c=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:c.message)||"Something went wrong")}if(d&&!T)try{if(!p)return n("error","No Contract Document is selected");x(!0);const l=await us(Number(k),Number(d),{notes:m,contractDocuments:p});x(!1),$(void 0),O(void 0),await D(),h(""),n("success",((y=l==null?void 0:l.data)==null?void 0:y.message)||"Contract document uploaded successfully")}catch(l){console.error(l),x(!1),n("error",((b=(r=l==null?void 0:l.response)==null?void 0:r.data)==null?void 0:b.message)||"Something went wrong")}else try{if(i!==void 0&&!T){if(!p)return n("error","No Contract Document is selected");const l=await hs(Number(k),Number(i),{notes:m,contractDocuments:p});x(!1),$(void 0),O(void 0),await D(),h(""),n("success",((E=l==null?void 0:l.data)==null?void 0:E.message)||"Contract document uploaded successfully")}}catch(l){console.error(l),x(!1),n("error",((P=(H=l==null?void 0:l.response)==null?void 0:H.data)==null?void 0:P.message)||"Something went wrong")}},te=()=>{G("Contract Terms"),Z(`/facility/${Number(k)}`)},le=t=>{const c=S.find(y=>y.Id===t.Id);c&&(z(t.Id),h(c.Notes),U(t),C(!0))},_=[{name:"Contract File",cell:t=>e.jsxs("div",{className:"d-flex align-items-center",onClick:()=>N(t.Id),title:"Click to download",children:[e.jsx("div",{className:"file-img",children:e.jsx("span",{className:"material-symbols-outlined filled",children:"description"})}),e.jsx("span",{className:"file-name",children:t.FileName})]})},{name:"Uploaded On",cell:t=>{const c={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0};return new Date(t.CreatedOn).toLocaleString("en-US",c)}},{name:"Notes",width:"10%",cell:t=>es(t.Notes)},{name:"Actions",width:"20%",cell:t=>e.jsxs(e.Fragment,{children:[e.jsx(oe,{submodule:"contractterms",module:"facilities",action:["GET","GET"],children:e.jsx(ss,{onEye:()=>N(t.Id)})}),e.jsx(oe,{submodule:"contractterms",module:"facilities",action:["GET","PUT"],children:e.jsx(as,{onEdit:()=>le(t)})}),e.jsx(oe,{submodule:"contractterms",module:"facilities",action:["GET","DELETE"],children:e.jsx(ts,{onDelete:()=>Q(t.Id)})})]})}];return e.jsxs("div",{className:"upload-tab-wrap",children:[L&&e.jsx(De,{}),e.jsxs(Ee,{children:[e.jsxs(Pe,{className:"mt-3",children:[e.jsxs(g,{xxl:"6",xl:"6",lg:"6",className:"col-group mt-2",children:[e.jsxs(u,{className:"",children:["Upload Contract ",e.jsx("span",{className:"asterisk",children:" *"})]}),e.jsxs("div",{className:"contract-file-wrapper",children:[e.jsx("div",{className:"file-picker-label-wrapper",children:e.jsx(u,{for:"exampleFile",className:"file-picker-label",children:"Choose File"})}),p||B?e.jsx("p",{className:"file-para",children:p?p.name:W==null?void 0:W.FileName}):e.jsx("p",{className:"file-para",children:"PDF, DOC, DOCX Maximum file size can be 2 MB"}),e.jsx(f,{id:"exampleFile",type:"file",style:{display:"none"},onChange:a})]})]}),e.jsxs(g,{xxl:"6",xl:"6",lg:"6",className:"col-group mt-2",children:[e.jsxs(u,{className:"",children:["Notes",e.jsx("span",{className:"asterisk",children:" *"})]}),e.jsx(f,{placeholder:" ",id:"note",value:m,onChange:t=>h(t.target.value)})]})]}),e.jsx(X,{className:"primary-btn  ",onClick:ae,disabled:!(p!=null&&p.name),children:"Save & Upload"})]}),e.jsx("div",{className:"datatable-wrapper contract-table-wrap mt-4",children:e.jsx(Ye,{columns:_,data:S})}),e.jsxs("div",{className:"btn-wrapper",children:[e.jsx(X,{className:"secondary-btn me-3",onClick:A,children:"Back"}),e.jsx(J,{onClick:te,to:"",children:e.jsx(X,{className:"secondary-btn",children:"Cancel"})})]})]})},fs=()=>{const[d,A]=o.useState("1"),[p,$]=o.useState(),[q,O]=o.useState(null),{Id:m,contractId:h}=Y(),{setActiveComponent:L}=o.useContext(ue),x=me(),S=Y(),{facilityName:F,setFacilityName:G}=o.useContext(ls),B=C=>{d!==C&&A(C)},z=()=>A("2"),W=C=>$(C),U=()=>A("1");o.useEffect(()=>{h&&O(Number(h))},[h]),o.useEffect(()=>{(async()=>{var Z,k,i,D;try{const a=await rs(Number(S==null?void 0:S.Id));G((k=(Z=a.data)==null?void 0:Z.data[0])==null?void 0:k.Name)}catch(a){console.error(a),n("error",((D=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:D.message)||"Something went wrong")}})()},[]);const T=()=>{L("Contract Terms"),x(`/facility/${Number(m)}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"navigate-wrapper d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx(J,{to:"/facility",className:"link-btn",children:"Facilities"}),e.jsx("span",{className:"backlash",children:" / "}),e.jsx(J,{onClick:T,to:"",className:"link-btn text-capitalize",style:{fontSize:"14px",fontStyle:"normal",lineHeight:"normal",letterSpacing:"-0.28px"},children:F??"--"}),e.jsx("span",{children:" / "}),e.jsx("span",{children:q?"Edit Contract Term":"Add New Contract Term"})]}),e.jsx("div",{className:"create-template-btn",children:e.jsx(J,{to:`/facility/${Number(m)}`,children:e.jsx(X,{className:"secondary-btn",onClick:T,children:"Back to Contract Terms"})})})]}),e.jsxs(is,{children:[e.jsx("h2",{className:"page-content-header",children:q?"Edit Contract Term":"Add New Contract Information"}),e.jsxs("div",{className:"tab-wrapper contract-tab-wrapper",children:[e.jsxs(ns,{tabs:!0,children:[e.jsx(ve,{disabled:!q&&d==="2",children:e.jsx(ke,{className:d==="1"?"show":"",onClick:()=>B("1"),to:"",children:e.jsx("input",{className:"contract-input",type:"text",value:q?"1. Edit Contract Term":"1. Add New Contract Information",disabled:d==="2"})})}),e.jsx(ve,{disabled:q&&d==="1",children:e.jsx(ke,{className:d==="2"?"show":"",onClick:()=>B("2"),to:"",children:e.jsx("input",{className:"contract-input",type:"text",value:"2. Upload Contract",disabled:d==="1"})})})]}),e.jsx(Me,{activeTab:d,disabled:d==="1",children:e.jsx(we,{tabId:"1",children:e.jsx(gs,{switchToNextTab:z,onContractIdChange:W,setActiveTab:A,editingContractId:q})})}),e.jsx(Me,{activeTab:d,disabled:d==="2",children:e.jsx(we,{tabId:"2",children:e.jsx(ps,{contractIdprop:p,switchToContractInfoTab:U})})})]})]})]})};export{fs as default};
