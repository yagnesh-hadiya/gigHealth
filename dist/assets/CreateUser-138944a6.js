import{u as O,E as ee,b as se,r as i,c as e,e as ae,R as le,h as c,k as o,l as u,m as g,a_ as ne,n as b,d as re,C as I,L as M,a$ as te,aT as ie,b0 as ce,H as d,b1 as oe,b2 as de,g as me}from"./index-e391d606.js";const he=()=>{var w,F,k,A,R,E;const{register:m,handleSubmit:T,formState:{errors:n},setValue:$}=O({resolver:ee(te)}),B=se(),[N,f]=i.useState(null),[x,v]=i.useState(null),[S,C]=i.useState(null),[D,z]=i.useState([]),[H,V]=i.useState([]),[_,q]=i.useState([]),[,h]=i.useState(!1),G=async()=>{var a;const s=await ie();z((a=s==null?void 0:s.data)==null?void 0:a.data)};i.useEffect(()=>{G()},[]);const J=async s=>{var a,t,r;try{if(s===null){v(null),C(null);return}if(s){v({value:s.value,label:s.label}),C(null);const l=s.value;h(!0);const j=await ce(l);q((a=j==null?void 0:j.data)==null?void 0:a.data),h(!1)}}catch(l){console.error(l),h(!1),d("error",((r=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:r.message)||"Something went wrong")}},K=s=>{C(s===null?null:s)};i.useEffect(()=>{(async()=>{var a,t,r;try{const l=await oe();V((a=l==null?void 0:l.data)==null?void 0:a.data)}catch(l){console.error(l),d("error",((r=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:r.message)||"Something went wrong")}})()},[]);const Q=async s=>{var U,Z;const{FirstName:a,LastName:t,Email:r,Phone:l,Address:j,Zip:X}=s,L=x==null?void 0:x.label,P=S==null?void 0:S.label,y=N==null?void 0:N.value,Y=l.replace(/\D/g,"");if(!L){d("error","Please select state");return}if(!P){d("error","Please select city");return}if(!y){d("error","Please select role");return}try{h(!0);const p=await de(a,t,r,Y,j,L,P,X,y);h(!1),d("success","User created successfully"),setTimeout(()=>{B("/users")},1500)}catch(p){console.error(p),h(!1),d("error",((Z=(U=p==null?void 0:p.response)==null?void 0:U.data)==null?void 0:Z.message)||"Something went wrong")}},W=s=>{var a,t;try{if(s===null){f(null);return}f(s)}catch(r){console.error(r),d("error",((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)||"Something went wrong")}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"page-content-header",children:"Basic Information"}),e.jsxs(ae,{onSubmit:T(Q),children:[e.jsxs(le,{children:[e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{className:"",children:["First Name ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"FirstName",placeholder:"First Name",invalid:!!n.FirstName,...m("FirstName")}),e.jsx(g,{children:(w=n.FirstName)==null?void 0:w.message})]}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{children:["Last Name ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"LastName",placeholder:"Last Name",invalid:!!n.LastName,...m("LastName")}),e.jsx(g,{children:(F=n.LastName)==null?void 0:F.message})]}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{children:["Phone ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"Phone",placeholder:"Phone Number",invalid:!!n.Phone,...m("Phone",{onChange:s=>{const a=ne(s.target.value);$("Phone",a)}})}),e.jsx(g,{children:(k=n.Phone)==null?void 0:k.message})]}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{className:"",children:["Email Address ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"Email",placeholder:"Email",invalid:!!n.Email,...m("Email")}),e.jsx(g,{children:(A=n.Email)==null?void 0:A.message})]}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{children:["Assign Role ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(b,{id:"Role",name:"Role",value:N,onChange:s=>W(s),placeholder:"Select Role",options:D.map(s=>({value:s==null?void 0:s.Id,label:s==null?void 0:s.Role.split(" ").map(a=>re(a)).join(" ")})),noOptionsMessage:()=>"No Role Found",isClearable:!0,isSearchable:!0})]}),e.jsx("h2",{className:"page-content-header",children:"Address"}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{className:"",children:["Address Line ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"Address",placeholder:"Address",invalid:!!n.Address,...m("Address")}),e.jsx(g,{children:(R=n.Address)==null?void 0:R.message})]}),e.jsxs(c,{md:"6",lg:"4",className:"col-group",children:[e.jsxs(o,{children:["State ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(b,{id:"State",name:"State",value:x,onChange:s=>J(s),options:H.map(s=>({value:s==null?void 0:s.Id,label:`${s==null?void 0:s.State} (${s==null?void 0:s.Code})`})),placeholder:"Select State",noOptionsMessage:()=>"No State Found",isSearchable:!0,isClearable:!0})]}),e.jsxs(c,{md:"6",lg:"2",className:"col-group",children:[e.jsxs(o,{children:["City ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(b,{id:"City",name:"City",value:S,onChange:s=>K(s),options:_.map(s=>({value:s==null?void 0:s.Id,label:s==null?void 0:s.City})),placeholder:"Select City",noOptionsMessage:()=>"No City Found",isClearable:!0,isSearchable:!0,isDisabled:!x})]}),e.jsxs(c,{md:"6",lg:"2",className:"col-group",children:[e.jsxs(o,{className:"",children:["Zip Code ",e.jsx("span",{className:"asterisk",children:"*"})]}),e.jsx(u,{id:"Zip",placeholder:"Zip",invalid:!!n.Zip,...m("Zip")}),e.jsx(g,{children:(E=n.Zip)==null?void 0:E.message})]})]}),e.jsxs("div",{className:"btn-wrapper",children:[e.jsx(I,{className:"primary-btn",children:"Save"}),e.jsx(M,{to:"/users",children:e.jsx(I,{className:"secondary-btn",children:"Cancel"})})]})]})]})},ge=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"navigate-wrapper",children:[e.jsx(M,{to:"/users",className:"link-btn",children:"Manage Users"}),e.jsx("span",{children:" / "}),e.jsx("span",{children:"Add New User"})]}),e.jsx(me,{children:e.jsx(he,{})})]});export{ge as default};
