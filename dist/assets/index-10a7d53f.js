import{r as c,b as O,c as a,g as Q,f as p,l as U,aQ as X,a4 as q,n as J,L as P,B as S,C as K,aR as V,aS as Y,b3 as Z,H as m,b4 as _,aU as ee,d,aW as ae,aX as te,b5 as se}from"./index-e391d606.js";const ce=()=>{const[i,j]=c.useState(null),[C,F]=c.useState([]),[u,h]=c.useState(1),[r,b]=c.useState(10),[y,E]=c.useState(0),[I,f]=c.useState([]),[T,D]=c.useState(1),[W,L]=c.useState(0),[o,A]=c.useState(""),[g,l]=c.useState(!1),[v,N]=c.useState(1),z=O(),B=e=>{switch(e){case"Active":return"#5E9B2D";case"Inactive":return"#717B9E";case"Target":return"#F45F5F";case"Prospect":return"#EA9A00";default:return""}},H=async()=>{var e,s,n;try{l(!0);const t=await Z();F((e=t==null?void 0:t.data)==null?void 0:e.data),l(!1)}catch(t){console.error(t),l(!1),m("error",((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong")}},x=async()=>{var e,s;try{const n=(i==null?void 0:i.value)??"";l(!0);const t=await _(r,o?v:u,o,n);E(t==null?void 0:t.count),f(t==null?void 0:t.rows),L(Math.ceil((t==null?void 0:t.count)/r)),l(!1)}catch(n){console.error(n),l(!1),m("error",((s=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:s.message)||"Something went wrong")}};c.useEffect(()=>{H(),x()},[r,o,i,f]),c.useEffect(()=>{x(),D(u)},[u]);const M=e=>{try{if(e===null){j(null);return}e&&(j({value:e.value,label:e.label}),h(1))}catch(s){console.error(s)}},R=async e=>{o?N(e):h(e)},$=ee(e=>{A(e),N(1)},200),G=async e=>{var s,n;try{l(!0);const t=await se(e);m("success","Facility deleted successfully"),l(!1),l(!0),await x(),l(!1)}catch(t){console.error(t),l(!1),m("error",((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong")}},k=e=>{z(`/facility/edit/${e}`)},w=[{name:"Sr No",selector:(e,s)=>(u-1)*r+(s!==void 0?s+1:e.Id||0),width:"5%"},{name:"Facility ID",selector:e=>`FID-${e.Id}`,minWidth:"90px"},{name:"Facility Name",cell:e=>a.jsx(P,{to:`/facility/${e.Id}`,className:"facility-link",style:{textDecoration:"none"},children:a.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#474D6A",textDecoration:"none"},children:d(e.Name)})}),minWidth:"208px"},{name:"Location",minWidth:"120px",cell:e=>a.jsx("div",{className:"center-align",children:e.State.State})},{name:"System Name",minWidth:"163px",cell:e=>{var s,n,t;return a.jsx("div",{className:"center-align",children:(s=e.ParentHealthSystem)!=null&&s.Name?d((n=e.ParentHealthSystem)==null?void 0:n.Name):d(((t=e==null?void 0:e.FacilityHealthSystem)==null?void 0:t.Name)??"--")})}},{name:"Service Type",minWidth:"110px",cell:e=>{var s;return a.jsx("div",{className:"center-align",children:(s=e.ServiceType)==null?void 0:s.Type})}},{name:"Program Manager",minWidth:"100px",cell:e=>{var s,n;return a.jsxs("div",{className:"center-align",children:[d(((s=e.ProgramManager)==null?void 0:s.FirstName)??"--")," ",d(((n=e.ProgramManager)==null?void 0:n.LastName)??"--")]})}},{name:"Status",minWidth:"100px",cell:e=>{var s,n;return a.jsx("div",{className:"center-align",style:{color:B((s=e==null?void 0:e.FacilityStatus)==null?void 0:s.Status)},children:(n=e==null?void 0:e.FacilityStatus)==null?void 0:n.Status})}},{name:"Actions",minWidth:"120px",cell:e=>a.jsxs(a.Fragment,{children:[a.jsx(S,{submodule:"",module:"facilities",action:["GET","PUT"],children:a.jsx(ae,{onEdit:()=>e.Id!==void 0&&k(e.Id)})}),a.jsx(S,{submodule:"",module:"facilities",action:["GET","DELETE"],children:a.jsx(te,{onDelete:()=>e.Id!==void 0&&G(e.Id)})})]})}];return a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"list-page-header",children:"Facilities"}),a.jsxs(Q,{children:[g&&a.jsx(p,{}),a.jsxs("div",{className:"d-flex search-button",children:[a.jsxs("div",{className:"search-bar-wrapper flex-grow-1",children:[a.jsx(U,{placeholder:"Search by Name",onChange:e=>$(e.target.value)}),a.jsx("img",{src:X,alt:"search"})]}),a.jsx("div",{className:"users-header-select select-dropdown",children:a.jsx(q,{children:a.jsx(J,{id:"location",name:"location",className:"custom-select-placeholder",value:i,onChange:e=>M(e),options:C.map(e=>({value:e==null?void 0:e.Id,label:`${e==null?void 0:e.State} (${e==null?void 0:e.Code})`})),placeholder:"Select Location",noOptionsMessage:()=>"No Location Found",isClearable:!0,isSearchable:!0})})}),a.jsx("div",{className:"table-navigate",children:a.jsx(P,{to:"/facility/create",className:"link-button",children:a.jsx(S,{submodule:"",module:"facilities",action:["GET","POST"],children:a.jsx(K,{className:"primary-btn",children:"Add New Facility"})})})})]}),g?a.jsx(p,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"datatable-wrapper",children:a.jsx(V,{columns:w,data:I,progressPending:g,paginationServer:!0,paginationTotalRows:y,paginationPerPage:r,selectableRows:!1,progressComponent:a.jsx(p,{}),responsive:!0})}),a.jsx(Y,{currentPage:o?v:T,totalPages:W,onPageChange:R,onPageSizeChange:b,entriesPerPage:r,totalRows:y,setPage:h})]})]})]})};export{ce as default};
