import{b as ce,r as n,d3 as de,H as l,aU as A,b3 as me,c as a,g as ue,l as ge,aQ as he,a4 as T,n as F,L as D,B as S,C as Se,f as $,aR as pe,aS as xe,d4 as Pe,d,aW as be,aX as fe,d5 as je,d6 as Ne}from"./index-e391d606.js";import{T as Ce}from"./CustomToggle-88ae48af.js";const Ee=()=>{const w=ce(),[u,C]=n.useState(1),[r,W]=n.useState(10),[M,k]=n.useState(0),[v,R]=n.useState(0),[z,i]=n.useState("idle"),[y,U]=n.useState([]),[g,B]=n.useState(""),[h,G]=n.useState("name"),[m,H]=n.useState("ASC"),[p,O]=n.useState(""),[x,K]=n.useState(""),[P,Q]=n.useState(null),[X,q]=n.useState([]),[b,J]=n.useState(null),[V,Y]=n.useState([]),[E,Z]=n.useState(!1),_=e=>{try{const t=y.find(N=>(N==null?void 0:N.Id)===e),{FirstName:s,LastName:o,Phone:c,State:re,Email:ie}=t||{};w(`/professionals/edit/${e}`,{state:{FirstName:s,LastName:o,Phone:c,State:re,Email:ie}})}catch(t){console.error(t),l("error","Something went wrong")}},ee=async e=>{var t,s;try{i("loading"),await je(e),i("idle"),j()}catch(o){console.error(o),i("error"),l("error",((s=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:s.message)||"Something went wrong")}},ae=A(async(e,t)=>{var s,o;try{const c=await Ne(e,t);l("success","Professional activation changed successfully")}catch(c){l("error",((o=(s=c==null?void 0:c.response)==null?void 0:s.data)==null?void 0:o.message)||"Something went wrong")}},500),I=n.useCallback(async()=>{var e,t;try{const s=await de();q(s)}catch(s){console.error(s),l("error",((t=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong")}},[]),f=new AbortController,j=n.useCallback(A(async()=>{var e,t;try{i("loading");const s=await Pe(r,u,h,m,g,p,x,f);R(s==null?void 0:s.count),U(s==null?void 0:s.rows),k(Math.ceil((s==null?void 0:s.count)/r)),i("idle")}catch(s){if(f.signal.aborted){Z(!0);return}console.error(s),i("error"),l("error",((t=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong")}},500),[u,g,r,m,h,x,p,E]),se=e=>{Q(e||null),O((e==null?void 0:e.Id)||"")},te=e=>{J(e||null),K((e==null?void 0:e.Id)||"")},L=n.useCallback(async()=>{var e,t;try{const s=await me();Y(s.data.data)}catch(s){console.error(s),l("error",((t=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:t.message)||"Something went wrong")}},[]);n.useEffect(()=>(j(),I(),L(),()=>f.abort()),[u,r,g,m,h,x,p,j,I,L,E]);const ne=async e=>{C(e)},oe=e=>{B(e)},le=[{name:"ID",selector:e=>`PID-${e.Id}`,width:"7.5%"},{name:m==="ASC"?"Professional Name ↑":"Professional Name ↓",sortFunction:(e,t)=>{if(e.FirstName&&t.FirstName){const s=e.FirstName.localeCompare(t.FirstName),o=h==="name"&&m==="ASC"?"DESC":"ASC";return H(o),G("name"),o==="ASC"?s:-s}return 0},selector:e=>a.jsx(D,{to:`/professionals/${e.Id}`,className:"facility-link",style:{textDecoration:"none"},children:a.jsxs("div",{className:"table-username",children:[a.jsx("p",{style:{marginRight:"5px"},className:"name-logo",children:e.FirstName.slice(0,1).toUpperCase()+e.LastName.slice(0,1).toUpperCase()}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[a.jsxs("span",{className:"row-user-name",children:[" ",`${d(e.FirstName)} ${d(e.LastName)}`]}),a.jsxs("span",{style:{fontSize:"14px",color:"rgba(113, 123, 158, 1)",fontWeight:400,marginTop:"2px"},children:[" ",`${e.Email}`]})]})]})}),minWidth:"260px"},{name:"Phone",selector:e=>e.Phone.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3"),minWidth:"120px"},{name:"Employment Expert",selector:e=>a.jsx("p",{className:"mb-0",children:e.EmploymentExpert?`${d(e.EmploymentExpert.FirstName)} ${d(e.EmploymentExpert.LastName)}`:"-"}),minWidth:"140px"},{name:"Program Manager",selector:e=>a.jsx("p",{className:"mb-0",children:e.ProgramManager?`${d(e.ProgramManager.FirstName)} ${d(e.ProgramManager.LastName)}`:"-"}),minWidth:"140px"},{name:"Location",selector:e=>e.State.State,minWidth:"120px"},{name:"Professional Status",cell:e=>a.jsx("p",{className:"mb-0",style:{color:e.ProfessionalStatus.Status==="Prospect"?"rgba(234, 154, 0, 1)":e.ProfessionalStatus.Status==="Assigned"?"rgba(127, 71, 221, 1)":e.ProfessionalStatus.Status==="Active"?"rgba(94, 155, 45, 1)":e.ProfessionalStatus.Status==="DNU"?"rgba(244, 95, 95, 1)":e.ProfessionalStatus.Status==="Lead"?"rgba(68, 128, 229, 1)":e.ProfessionalStatus.Status==="Inactive"?"rgba(244, 95, 95, 1)":e.ProfessionalStatus.Status==="Past Employee"?"rgba(170, 169, 169, 1)":""},children:e.ProfessionalStatus?e.ProfessionalStatus.Status:"-"}),minWidth:"150px"},{name:"Status",cell:e=>a.jsx("div",{children:a.jsx(S,{submodule:"",module:"professionals",action:["GET","PUT"],children:a.jsx(Ce,{onStateChange:t=>ae(e.Id,t),checked:e.ActivationStatus})})}),minWidth:"100px"},{name:"Actions",cell:(e,t)=>a.jsxs("div",{className:"d-flex",children:[a.jsx(S,{submodule:"",module:"professionals",action:["GET","PUT"],children:a.jsx(be,{onEdit:()=>e.Id!==void 0&&_(e.Id)})}),a.jsx(S,{submodule:"",module:"professionals",action:["GET","DELETE"],children:a.jsx(fe,{onDelete:()=>e.Id!==void 0&&ee(e.Id)})})]},t),minWidth:"120px"}];return a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:"list-page-header",children:"Professionals"}),a.jsxs(ue,{children:[a.jsxs("div",{className:"d-flex flex-wrap mb-2",style:{gap:"8px"},children:[a.jsxs("div",{className:"search-bar-wrapper flex-grow-1 me-0",children:[a.jsx(ge,{placeholder:"Search Here By Name/Email Address/Phone Number",ma:!0,value:g,onChange:e=>oe(e.target.value)}),a.jsx("img",{src:he,alt:"search"})]}),a.jsx("div",{className:"users-header-select ms-0",children:a.jsx(T,{className:"mb-0",children:a.jsx(F,{id:"location",name:"location",value:b?{value:b.Id,label:b.State}:null,onChange:e=>te(e?{Id:e.value,State:e.label,Code:e.label}:null),placeholder:"Select Location",options:V.map(e=>({value:e.Id,label:e.State})),noOptionsMessage:()=>"No Location Found",isClearable:!0,isSearchable:!0})})}),a.jsx("div",{className:"users-header-select ms-0",children:a.jsx(T,{children:a.jsx(F,{id:"professionalstatus",name:"professionalstatus",className:"ms-0",value:P?{value:P.Id,label:P.Status}:null,onChange:e=>se(e?{Id:e.value,Status:e.label}:null),placeholder:"Show All Professionals",options:X.map(e=>({value:e.Id,label:e.Status})),noOptionsMessage:()=>"No professionalstatus Found",isClearable:!0,isSearchable:!0})})}),a.jsx("div",{className:"table-navigate ms-0",children:a.jsx(D,{to:"/professionals/create",className:"link-button",children:a.jsx(S,{submodule:"",module:"professionals",action:["GET","POST"],children:a.jsx(Se,{className:"primary-btn ms-0",children:"Add Professional"})})})})]}),z==="loading"?a.jsx($,{}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"datatable-wrapper",children:a.jsx(pe,{columns:le,data:y,paginationServer:!0,paginationTotalRows:v,paginationPerPage:r,selectableRows:!1,progressComponent:a.jsx($,{}),responsive:!0})}),a.jsx(xe,{currentPage:u,totalPages:M,onPageChange:ne,onPageSizeChange:W,entriesPerPage:r,totalRows:v,setPage:C})]})]})]})};export{Ee as default};
