import{u as je,E as Ne,b as be,r,c as s,f as fe,e as Se,R as ve,h as c,k as i,l as g,a_ as Ce,n as C,M as Pe,S as we,o as ke,p as ye,D as Ie,bN as Ee,L as H,C as Le,d7 as Me,b0 as Ze,H as d,d8 as R,b1 as Fe,cd as De,W as Ae,X as $e,d9 as Be,g as Re}from"./index-e391d606.js";const He=()=>{var A;const{register:p,handleSubmit:T,setValue:q,formState:{errors:o}}=je({resolver:Ne(Me)}),G=be(),[h,E]=r.useState(null),[t,S]=r.useState(null),[j,N]=r.useState(null),[L,J]=r.useState([]),[m,V]=r.useState([]),[v,W]=r.useState(null),[P,X]=r.useState([]),[w,M]=r.useState(null),[_,K]=r.useState([]),[Q,U]=r.useState([]),[Z,x]=r.useState("idle"),[Y,z]=r.useState(),[k,F]=r.useState([]),[y,O]=r.useState(),[I,ee]=r.useState(""),[D,se]=r.useState([]),ae=async e=>{var a,n,l;try{if(e===null){E(null),S(null),N(null);return}if(e){E({value:e.value,label:e.label}),S(null),N(null);const u=e.value;x("loading");const b=await Ze(u);K((a=b==null?void 0:b.data)==null?void 0:a.data),x("idle")}}catch(u){console.error(u),x("error"),d("error",((l=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:l.message)||"Something went wrong")}},le=L.map(e=>({value:e.Id,label:`${e.State} (${e.Code})`})),re=async e=>{var a;if(e===null)S(null),N(null);else{x("loading"),S(e);try{if(e!=null&&e.value){N(null);const n=await R(e==null?void 0:e.value);U((a=n.data)==null?void 0:a.data)}}catch(n){console.error(n)}te(),x("idle")}},ne=async()=>{var e,a,n;try{const l=await Fe();J((e=l==null?void 0:l.data)==null?void 0:e.data)}catch(l){console.error(l),d("error",((n=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:n.message)||"Something went wrong")}},te=async()=>{try{if(t!=null&&t.value)return await R(t==null?void 0:t.value)}catch(e){console.error(e)}},oe=async()=>{var e;try{const a=await De();V((e=a.data)==null?void 0:e.data)}catch(a){console.error(a)}},ce=async()=>{var e;try{if(y){const a=await Ae(y);X((e=a.data)==null?void 0:e.data)}}catch(a){console.error(a)}},ie=async()=>{var e;try{const a=m==null?void 0:m.length;if(a>0){const n=[];for(let l=1;l<=a;l++){const u=await $e(l);n.push((e=u.data)==null?void 0:e.data)}se(n)}}catch(a){console.error(a)}};r.useEffect(()=>{ie()},[m==null?void 0:m.length]),r.useEffect(()=>{ce()},[y]),r.useEffect(()=>{ne(),oe()},[]);const de=async e=>{var $,B;const{firstName:a,lastName:n,phone:l,email:u,address:b,experience:xe}=e,ge=l.replace(/-/g,"");if(!(h!=null&&h.value)){d("error","Please select state");return}if(!(t!=null&&t.value)){d("error","Please select city");return}if(!j){d("error","Please select zip code");return}if(!v){d("error","Please select profession");return}if(!w){d("error","Please select speciality");return}if(!e.experience)return d("error","Experience is required");if(!(k.length>0))return d("error","Please select the preferred locations");try{x("loading");const f=await Be(a,n,u,ge,b,h==null?void 0:h.value,t==null?void 0:t.value,j.value,v==null?void 0:v.Id,w.value,xe,k.map(pe=>pe.value));d("success","Professional created successfully"),setTimeout(()=>{G("/professionals")},1500),x("idle")}catch(f){console.error(f),x("error"),d("error",((B=($=f==null?void 0:f.response)==null?void 0:$.data)==null?void 0:B.message)||"Something went wrong")}},ue=e=>{N(e&&{value:e.value,label:e.label})},me=e=>{ee(e.Profession),M(null),O(e.Id),W(e)},he=e=>{M(e&&{value:e.value,label:e.label})};return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"page-content-header",children:"Basic Information"}),Z==="loading"&&s.jsx(fe,{}),s.jsxs(Se,{children:[s.jsxs(ve,{children:[s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["First Name ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{id:"firstName",placeholder:"First Name",...p("firstName")}),o.firstName&&s.jsx("label",{className:"text-danger text-sm-center",children:o.firstName.message})]}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["Last Name ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{id:"lastName",placeholder:"Last Name",...p("lastName")}),o.lastName&&s.jsx("label",{className:"text-danger text-sm-center",children:o.lastName.message})]}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{children:["Phone ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{id:"Phone",placeholder:"Phone Number",...p("phone",{onChange:e=>{const a=Ce(e.target.value);q("phone",a)}})}),o.phone&&s.jsx("label",{className:"text-danger text-sm-center",children:o.phone.message})]}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["Email ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{id:"email",placeholder:"Email",...p("email")}),o.email&&s.jsx("label",{className:"text-danger text-sm-center",children:o.email.message})]}),s.jsx("h2",{className:"page-content-header",children:"Address"}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["Address Line ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{id:"address",placeholder:"Address",...p("address")}),o.address&&s.jsx("label",{className:"text-danger text-sm-center",children:o.address.message})]}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{children:["State ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(C,{id:"State",name:"State",value:h,onChange:e=>ae(e),options:L.map(e=>({value:e==null?void 0:e.Id,label:`${e==null?void 0:e.State} (${e==null?void 0:e.Code})`})),placeholder:"Select State",noOptionsMessage:()=>"No State Found",isSearchable:!0,isClearable:!0})]}),s.jsxs(c,{xl:"2",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{children:["City ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(C,{id:"City",name:"City",value:t,onChange:e=>re(e),options:_.map(e=>({value:e==null?void 0:e.Id,label:e==null?void 0:e.City})),placeholder:"Select City",noOptionsMessage:()=>"No City Found",isClearable:!0,isSearchable:!0,isDisabled:!h})]}),s.jsxs(c,{xl:"2",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["Zip Code ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(C,{id:"Zip",name:"Zip",value:j?{value:j.value,label:j.label}:null,onChange:e=>ue(e),options:Q.map(e=>({value:e==null?void 0:e.Id,label:e==null?void 0:e.ZipCode})),placeholder:"Select Zip",noOptionsMessage:()=>"No Zip Found",isClearable:!0,isSearchable:!0,isDisabled:!t}),o.zipCodeId&&s.jsx("label",{className:"text-danger text-sm-center",children:(A=o.zipCodeId)==null?void 0:A.message})]}),s.jsx("h2",{className:"page-content-header",children:"Other"}),s.jsxs(c,{md:"4",className:"col-group",children:[s.jsxs(i,{className:"col-label",children:["Select Profession ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(Pe,{menuButton:s.jsx(g,{style:{cursor:"pointer",caretColor:"transparent"},type:"text",value:I||"Select Profession"}),children:m==null?void 0:m.map((e,a)=>{var n;return s.jsx(we,{label:e.Category,className:"sub-menu",children:D&&((n=D[a])==null?void 0:n.map(l=>s.jsx(ke,{dir:"top",onClick:()=>me(l),children:s.jsx(ye,{value:l.Profession,className:"sub-menu-item",children:l.Profession})},l.Id)))},e.Id)})}),s.jsx("img",{src:Ie,alt:"DropdownImage",className:"submenu-dropdown"})]}),s.jsxs(c,{xxl:"4",xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{className:"",children:["Speciality",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(C,{id:"specialities",name:"specialities",options:P==null?void 0:P.map(e=>({value:e==null?void 0:e.Id,label:e==null?void 0:e.Speciality})),value:w,placeholder:"Select Speciality",noOptionsMessage:()=>"No Speciality Found",onChange:e=>he(e),isClearable:!0,isSearchable:!0,isDisabled:!I})]}),s.jsxs(c,{xl:"4",lg:"6",md:"6",className:"col-group",children:[s.jsxs(i,{children:["Experience ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(g,{type:"number",value:Y,placeholder:"Experience",...p("experience"),onChange:e=>z(Number(e.target.value)),min:0,max:30})]}),s.jsxs(c,{xl:"4",lg:"4",md:"6",className:"col-group",children:[s.jsxs(i,{children:["Preferred Locations ",s.jsx("span",{className:"asterisk",children:"*"})]}),s.jsx(Ee,{options:le,value:k,onChange:e=>{if(e===null){F([]);return}else F(e)}})]})]}),s.jsxs("div",{className:"btn-wrapper",children:[s.jsx("button",{className:"primary-btn border-0 me-2",onClick:T(de),disabled:Z==="loading",children:"Save"}),s.jsx(H,{to:"/professionals",children:s.jsx(Le,{className:"secondary-btn",children:"Cancel"})})]})]})]})},qe=()=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"navigate-wrapper",children:[s.jsx(H,{to:"/professionals",className:"link-btn",children:"Manage Professionals"}),s.jsx("span",{children:" / "}),s.jsx("span",{children:"Add New Prefessional"})]}),s.jsx(Re,{children:s.jsx(He,{})})]});export{qe as default};
